# CSV客户信息查询工具

这是一个Chrome油猴脚本插件，用于处理CSV文件并查询3.0和4.0客户信息。

## 功能特性

1. **CSV文件上传和解析** - 支持上传CSV文件并自动解析列结构
2. **列名配置** - 用户可以选择3.0和4.0客户ID对应的列名
3. **API查询** - 自动调用指定的API接口查询客户信息
4. **数据更新** - 在原CSV基础上新增两列客户名称信息
5. **文件下载** - 处理完成后可下载更新后的CSV文件

## 安装方法

1. 确保已安装Chrome浏览器和Tampermonkey扩展
2. 打开Tampermonkey管理面板
3. 点击"添加新脚本"
4. 将 `csv_client_mapper.user.js` 文件内容复制粘贴到编辑器中
5. 保存脚本

## 使用方法

1. 在任意网页上，点击右上角的"📊 CSV工具"按钮
2. 上传您的CSV文件
3. 选择3.0客户ID列名和4.0客户ID列名
4. 点击"开始处理"按钮
5. 等待处理完成（会显示进度条）
6. 点击"下载更新后的CSV文件"按钮获取结果

## API接口说明

脚本会调用以下两个API接口：

- **3.0客户查询**: `RESOURCE_TYPE_LEGACY_CLIENT`
- **4.0客户查询**: `RESOURCE_TYPE_CLIENT`

API返回格式：
```json
{
    "resultCode": "RESULT_CODE_OK",
    "resultDescription": "",
    "data": {
        "resources": [
            {
                "id": "134051045159012427",
                "name": "诗悦"
            }
        ],
        "nextPageToken": "WzEzNDA1MTA0NTE1OTAxMjQyN10="
    }
}
```

## 注意事项

1. 确保网络连接正常，API调用需要访问外部接口
2. 处理大量数据时请耐心等待，脚本会显示处理进度
3. 如果某个客户ID查询失败，会在对应列显示"查询失败"
4. 脚本会自动添加延迟避免API请求过于频繁

## 技术特性

- 纯前端实现，无需服务器
- 支持大文件处理
- 实时进度显示
- 错误处理和重试机制
- 响应式用户界面